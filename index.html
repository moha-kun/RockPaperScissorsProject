<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">

    <!--
    <script type="text/javascript" src="./scripts/script.js"></script>
    -->
</head>

<body>
    <div class="head">
        <h1>Rock Paper Scissors</h1>
        <h2 class="h21">It's all about your life, Win or die</h2>
    </div>
    <div class="playerSlections">
        <div class="selection s1" data-key="paper">paper</div>
        <div class="selection s2" data-key="rock">rock</div>
        <div class="selection s3" data-key="scissors">scissors</div>
    </div>
    <div class="result"></div>
    <div class="final"></div>

    <script>
        const pS = document.querySelector(".playerSlections");
        const selections = Array.from(pS.querySelectorAll(".selection"));
        const showResult = document.querySelector(".result");
        const final = document.querySelector(".final");
        let computerWin = 0;
        let playerWin = 0;

        selections.forEach(selection => selection.addEventListener("click", (e) => {
            let playerSelect = e.target.getAttribute("data-key");

            let result = playRound(playerSelect, computerPlay());
            showResult.textContent = result;

            if (result.substring(0, 9) === "You Lose!") computerWin++;
            if (result.substring(0, 8) === "You Win!") playerWin++;
            console.log(playerWin, computerWin);

            if (playerWin > computerWin) final.textContent = `You Win ${playerWin} - ${computerWin}`;
            else if (playerWin < computerWin) final.textContent = `You Lose ${playerWin} - ${computerWin}`;
            else final.textContent = `Draw ${playerWin} - ${computerWin}`;

        }));

        function computerPlay() {
            let choice = Math.floor(3 * Math.random());
            switch (choice) {
                case 0:
                    return "Rock";
                case 1:
                    return "Paper";
                case 2:
                    return "Scissors";
            }
        }

        function playRound(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();
            if (playerSelection == "rock" && computerSelection == "paper") return "You Lose! Paper beats Rock";
            else if (playerSelection == "paper" && computerSelection == "rock") return "You Win! Paper beats Rock";
            else if (playerSelection == "scissors" && computerSelection == "rock") return "You Lose! Rock beats Scissors";
            else if (playerSelection == "rock" && computerSelection == "scissors") return "You Win! Rock beats Scissors";
            else if (playerSelection == "paper" && computerSelection == "scissors") return "You Lose! Scissors beats Paper";
            else if (playerSelection == "scissors" && computerSelection == "paper") return "You Win! Scissors beats Paper";
            else return "Draw";
        }
    </script>
</body>

</html>